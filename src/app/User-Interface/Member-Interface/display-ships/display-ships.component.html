<div *ngIf="show">
  <div *ngIf="fleetEmpty">
    <p class="text-base text-center sm:text-left px-4">
      Aucun vaisseau à afficher pour l'instant, utilisez la barre de recherche
      au dessus pour en ajouter!
    </p>
  </div>

  <mat-accordion>
    <ul class="flex flex-wrap lg:flex-no-wrap scroll-smooth focus:scroll-auto">
      <li *ngFor="let ship of ships" class="w-full lg:w-1/2 p-4">
        <mat-expansion-panel
          (opened)="panelOpenState = true"
          (closed)="panelOpenState = false"
        >
          <mat-expansion-panel-header class="relative">
            <!-- Background image -->
            <div
              class="absolute inset-0 bg-cover bg-center bg-black"
              style="background-image: url('{{ ship.imageUrl }}');"
            ></div>

            <div class="blurImage flex flex-col justify-end">
              <div class="header-content content-center">
                <div>
                  <h3 class="ml-4 mb-0 pt-4">
                    {{ ship.name }}
                  </h3>
                  <p class="text-teal-200 pl-4 nickname">
                    {{
                      ship.nickname && ship.nickname !== ""
                        ? ship.nickname
                        : null
                    }}
                  </p>
                </div>
                <div class="panel-header-footer flex">
                  <div class="focus w-11/12">
                    <p class="flex flex-wrap sm:inline">
                      <span class="text-teal-200 ml-4 type">{{
                        ship.focus
                      }}</span>
                      <span
                        class="text-teal-100 text-sm mb-0 mx-4 pl-2 sm:mb-4 manufacturer"
                        >{{ ship.manufacturer }}</span
                      >
                    </p>
                  </div>
                  <div class="images w-1/12 justify-end">
                    <img
                      class="justify-end"
                      *ngIf="ship.production_status === 'flight-ready'"
                      src="../../../../assets/images/flyready.png"
                      alt="Flight Ready"
                      width="30"
                    />
                    <img
                      class="justify-end"
                      *ngIf="ship.production_status !== 'flight-ready'"
                      src="../../../../assets/images/flyreadynot.png"
                      alt="Not Flight Ready"
                      width="30"
                    />
                  </div>
                </div>
              </div>
            </div>
          </mat-expansion-panel-header>

          <!-- Information container -->
          <p class="text-xs italic p-2">"{{ ship.description }}"</p>
          <div class="mx-4 mb-4">
            <p>Role: {{ ship.type | titlecase }}</p>
            <p>Size: {{ ship.size | titlecase }}</p>
            <p>Max crew: {{ ship.max_crew }}</p>
            <p>Max SCU: {{ ship.cargo_capacity }}</p>
            <a
              class="hover:underline"
              href="{{ ship.url }}"
              target="_blank"
              rel="noopener noreferrer"
              >Voir dans le magasin</a
            >
            <br />
            <a
              class="hover:underline"
              href="https://starcitizen.tools/{{ ship.name }}"
              target="_blank"
              rel="noopener noreferrer"
            >
              Visiter le wiki
            </a>
          </div>

          <!-- Actions container -->
          <div
            class="actions flex flex-wrap md:flex-nowrap justify-between items-centr"
          >
            <div class="changeName">
              <div *ngIf="shipToChange !== ship.id">
                <button
                  title="Edit"
                  class="normal"
                  (click)="handleEdit($event, ship.id)"
                  aria-label="Edit the ships name"
                >
                  Éditer le nom
                </button>
              </div>
              <div *ngIf="shipToChange === ship.id">
                <input
                  [(ngModel)]="shipNameChanges[ship.id]"
                  title="Nouveau nom"
                  placeholder="Nommez votre vaisseau!"
                  class="pl-1 sm:pl-2 mr-1 sm:mr-2"
                />
                <button
                  title="Valider"
                  class="icon mr-1 sm:mr-2"
                  type="submit"
                  (click)="handleCheck(ship.id)"
                  aria-label="Validate the ships name change"
                >
                  <mat-icon>check</mat-icon>
                </button>
                <button
                  title="Cancel"
                  class="icon"
                  type="button"
                  (click)="handleCancel()"
                  aria-label="Cancel the ship name change"
                >
                  <mat-icon>cancel</mat-icon>
                </button>
              </div>
            </div>
            <button
              title="Supprimer"
              class="normal"
              (click)="handleShipRemove(ship.id)"
            >
              Supprimer
            </button>
          </div>
        </mat-expansion-panel>
        <mat-progress-bar
          *ngIf="shipToRemove === ship.id"
          mode="indeterminate"
        ></mat-progress-bar>
      </li>
    </ul>
  </mat-accordion>
</div>
